serviceMaps:
  serviceName: wms-services
  mappings:
    - version: 1.0
      description: Persists WMS details in tables
      fromTopic: save-wms-application
      isTransaction: true
      queryMaps:
        - query: INSERT INTO state_sor(sor_id,sor_name,start_date,end_date,chapter,item_no,description_of_item,unit,rate) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: ScheduleOfRateApplication.*
          jsonMaps:
            - jsonPath: $.ScheduleOfRateApplication.*.sor_id

            - jsonPath: $.ScheduleOfRateApplication.*.sor_name
           
            - jsonPath: $.ScheduleOfRateApplication.*.start_date
            
            - jsonPath: $.ScheduleOfRateApplication.*.end_date

            - jsonPath: $.ScheduleOfRateApplication.*.chapter
            
            - jsonPath: $.ScheduleOfRateApplication.*.item_no
            
            - jsonPath: $.ScheduleOfRateApplication.*.description_of_item
            
            - jsonPath: $.ScheduleOfRateApplication.*.unit
            
            - jsonPath: $.ScheduleOfRateApplication.*.rate

    - version: 1.0
      description: Update SOR applications in table
      fromTopic: update-wms-application
      isTransaction: true
      queryMaps:
        - query: UPDATE state_sor SET chapter = ?,sor_name = ?, rate = ?, end_date = ? WHERE sor_id=?;
          basePath: ScheduleOfRateApplication.*
          jsonMaps:
            - jsonPath: $.ScheduleOfRateApplication.*.chapter

            - jsonPath: $.ScheduleOfRateApplication.*.sor_name
           
            - jsonPath: $.ScheduleOfRateApplication.*.rate
            
            - jsonPath: $.ScheduleOfRateApplication.*.end_date
            
            - jsonPath: $.ScheduleOfRateApplication.*.sor_id
            
            
            
    - version: 1.0
      description: Persists scheme details in tables
      fromTopic: save-scm-application
      isTransaction: true
      queryMaps:

        - query: INSERT INTO scheme_master (scheme_id,start_date,end_date,source_of_fund,scheme_name_en,scheme_name_reg,fund,description_of_the_scheme,upload_document) VALUES (?, ?, ?, ?, ?, ?, ?, ?,?);
          basePath: SchemeApplication.*
          jsonMaps:
            - jsonPath: $.SchemeApplication.*.scheme_id

            - jsonPath: $.SchemeApplication.*.start_date

            - jsonPath: $.SchemeApplication.*.end_date
            
            - jsonPath: $.SchemeApplication.*.source_of_fund

            - jsonPath: $.SchemeApplication.*.scheme_name_en

            - jsonPath: $.SchemeApplication.*.scheme_name_reg

            - jsonPath: $.SchemeApplication.*.fund

            - jsonPath: $.SchemeApplication.*.description_of_the_scheme

            - jsonPath: $.SchemeApplication.*.upload_document
            
       
       
      
    - version: 1.0
      description: Update Scheme applications in table
      fromTopic: update-scm-application
      isTransaction: true
      queryMaps:
      
        - query: UPDATE scheme_master SET source_of_fund = ?,start_date = ?, end_date = ?, fund = ?, description_of_the_scheme = ?, upload_document = ? WHERE scheme_id=?;
          basePath: SchemeApplication.*
          jsonMaps:
            - jsonPath: $.SchemeApplication.*.source_of_fund

            - jsonPath: $.SchemeApplication.*.start_date
           
            - jsonPath: $.SchemeApplication.*.end_date
            
            - jsonPath: $.SchemeApplication.*.fund
            
            - jsonPath: $.SchemeApplication.*.description_of_the_scheme
            
            - jsonPath: $.SchemeApplication.*.upload_document
            
            - jsonPath: $.SchemeApplication.*.scheme_id
            
            
            
            
    - version: 1.0
      description: Persists project details in tables
      fromTopic: save-prj-application
      isTransaction: true
      queryMaps:

        - query: INSERT INTO project_master (project_id,project_number,source_of_fund,scheme_no,department,project_name_en,project_name_reg,project_description,project_timeline,project_start_date,project_end_date,scheme_name,approval_number,approval_date,status) VALUES (?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?,?,?);
          basePath: ProjectApplication.*
          jsonMaps:
            - jsonPath: $.ProjectApplication.*.project_id

            - jsonPath: $.ProjectApplication.*.project_number

            - jsonPath: $.ProjectApplication.*.source_of_fund
            
            - jsonPath: $.ProjectApplication.*.scheme_no

            - jsonPath: $.ProjectApplication.*.department

            - jsonPath: $.ProjectApplication.*.project_name_en

            - jsonPath: $.ProjectApplication.*.project_name_reg

            - jsonPath: $.ProjectApplication.*.project_description

            - jsonPath: $.ProjectApplication.*.project_timeline
            
            - jsonPath: $.ProjectApplication.*.project_start_date
            
            - jsonPath: $.ProjectApplication.*.project_end_date
            
            - jsonPath: $.ProjectApplication.*.scheme_name
            
            - jsonPath: $.ProjectApplication.*.approval_number
            
            - jsonPath: $.ProjectApplication.*.approval_date
            
            - jsonPath: $.ProjectApplication.*.status
            
       
       
      
    - version: 1.0
      description: Update Project applications in table
      fromTopic: update-prj-application
      isTransaction: true
      queryMaps:
      
        - query: UPDATE project_master SET source_of_fund = ?,department =?,project_description=?,project_timeline=?,project_start_date = ?, project_end_date = ?, approval_number = ?, approval_date = ?, status = ? WHERE project_id=?;
          basePath: SchemeApplication.*
          jsonMaps:
            - jsonPath: $.SchemeApplication.*.source_of_fund
            
            - jsonPath: $.SchemeApplication.*.department
            
            - jsonPath: $.SchemeApplication.*.project_description
            
            - jsonPath: $.SchemeApplication.*.project_timeline

            - jsonPath: $.SchemeApplication.*.project_start_date
           
            - jsonPath: $.SchemeApplication.*.project_end_date
            
            - jsonPath: $.SchemeApplication.*.approval_number
            
            - jsonPath: $.SchemeApplication.*.approval_date
            
            - jsonPath: $.SchemeApplication.*.status
            
            - jsonPath: $.SchemeApplication.*.project_id

       
    - version: 1.0
      description: Persists WMS Work details in tables
      fromTopic: save-work-application
      isTransaction: true
      queryMaps:
        - query: INSERT INTO work(work_id,project_id,work_no,work_name,project_name,department_name,work_type,work_category,work_subtype,project_phase,deviation_percent,start_location,end_location,financial_year,budget_head,createdby,lastmodifiedby,createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: WMSWorkApplication.*
          jsonMaps:
            - jsonPath: $.WMSWorkApplication.*.work_id

            - jsonPath: $.WMSWorkApplication.*.project_id
           
            - jsonPath: $.WMSWorkApplication.*.work_no
            
            - jsonPath: $.WMSWorkApplication.*.work_name

            - jsonPath: $.WMSWorkApplication.*.project_name
            
            - jsonPath: $.WMSWorkApplication.*.department_name
            
            - jsonPath: $.WMSWorkApplication.*.work_type
            
            - jsonPath: $.WMSWorkApplication.*.work_category
            
            - jsonPath: $.WMSWorkApplication.*.work_subtype   
            
            - jsonPath: $.WMSWorkApplication.*.project_phase
            
            - jsonPath: $.WMSWorkApplication.*.deviation_percent
            
            - jsonPath: $.WMSWorkApplication.*.start_location
            
            - jsonPath: $.WMSWorkApplication.*.end_location
            
            - jsonPath: $.WMSWorkApplication.*.financial_year
            
            - jsonPath: $.WMSWorkApplication.*.budget_head
            
            - jsonPath: $.WMSWorkApplication.*.auditDetails.createdBy

            - jsonPath: $.WMSWorkApplication.*.auditDetails.lastModifiedBy

            - jsonPath: $.WMSWorkApplication.*.auditDetails.createdTime
            
            - jsonPath: $.WMSWorkApplication.*.auditDetails.lastModifiedTime   
      
 
    - version: 1.0
      description: Update Work applications in table
      fromTopic: update-work-application
      isTransaction: true
      queryMaps:
      
        - query: UPDATE work SET department_name = ?,work_type = ?, work_category = ?, work_subtype = ?, project_phase = ?, deviation_percent = ? WHERE work_no = ? and work_id = ?;
          basePath: WMSWorkApplication.*
          jsonMaps:
            - jsonPath: $.WMSWorkApplication.*.department_name

            - jsonPath: $.WMSWorkApplication.*.work_type
           
            - jsonPath: $.WMSWorkApplication.*.work_category
            
            - jsonPath: $.WMSWorkApplication.*.work_subtype
            
            - jsonPath: $.WMSWorkApplication.*.project_phase
            
            - jsonPath: $.WMSWorkApplication.*.deviation_percent
            
            - jsonPath: $.WMSWorkApplication.*.work_no
            
            - jsonPath: $.WMSWorkApplication.*.work_id			



   