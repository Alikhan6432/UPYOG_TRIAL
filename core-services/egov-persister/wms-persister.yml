serviceMaps:
  serviceName: wms-services
  mappings:
    - version: 1.0
      description: Persists WMS details in tables
      fromTopic: save-wms-application
      isTransaction: true
      queryMaps:
        - query: INSERT INTO state_sor(sor_id,sor_name,start_date,end_date,chapter,item_no,description_of_item,unit,rate) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: ScheduleOfRateApplication.*
          jsonMaps:
            - jsonPath: $.ScheduleOfRateApplication.*.sor_id

            - jsonPath: $.ScheduleOfRateApplication.*.sor_name
           
            - jsonPath: $.ScheduleOfRateApplication.*.start_date
            
            - jsonPath: $.ScheduleOfRateApplication.*.end_date

            - jsonPath: $.ScheduleOfRateApplication.*.chapter
            
            - jsonPath: $.ScheduleOfRateApplication.*.item_no
            
            - jsonPath: $.ScheduleOfRateApplication.*.description_of_item
            
            - jsonPath: $.ScheduleOfRateApplication.*.unit
            
            - jsonPath: $.ScheduleOfRateApplication.*.rate

    - version: 1.0
      description: Update SOR applications in table
      fromTopic: update-wms-application
      isTransaction: true
      queryMaps:
        - query: UPDATE state_sor SET chapter = ?,sor_name = ?, rate = ?, end_date = ? WHERE sor_id=?;
          basePath: ScheduleOfRateApplication.*
          jsonMaps:
            - jsonPath: $.ScheduleOfRateApplication.*.chapter

            - jsonPath: $.ScheduleOfRateApplication.*.sor_name
           
            - jsonPath: $.ScheduleOfRateApplication.*.rate
            
            - jsonPath: $.ScheduleOfRateApplication.*.end_date
            
            - jsonPath: $.ScheduleOfRateApplication.*.sor_id
            
            
            
    - version: 1.0
      description: Persists scheme details in tables
      fromTopic: save-scm-application
      isTransaction: true
      queryMaps:

        - query: INSERT INTO Scheme_Master (Scheme_ID,Start_Date,End_Date,Source_Of_Fund,Scheme_Name_En,Scheme_Name_Reg,Fund,Description_Of_the_Scheme,Upload_Document) VALUES (?, ?, ?, ?, ?, ?, ?, ?,?);
          basePath: SchemeApplication.*
          jsonMaps:
            - jsonPath: $.SchemeApplication.*.Scheme_ID

            - jsonPath: $.SchemeApplication.*.Start_Date

            - jsonPath: $.SchemeApplication.*.End_Date
            
            - jsonPath: $.SchemeApplication.*.Source_Of_Fund

            - jsonPath: $.SchemeApplication.*.Scheme_Name_En

            - jsonPath: $.SchemeApplication.*.Scheme_Name_Reg

            - jsonPath: $.SchemeApplication.*.Fund.id

            - jsonPath: $.SchemeApplication.*.Description_Of_the_Scheme.id

            - jsonPath: $.SchemeApplication.*.Upload_Document





   