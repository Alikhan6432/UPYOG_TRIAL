serviceMaps:
  serviceName: egov-filemgmnt
  mappings:
  - version: 1.0
    description: Persists applicant details in egov_filemgmnt database, eg_fm_applicantpersonal table
    fromTopic: save-fm-applicantpersonal
    isTransaction: true
    queryMaps:
    - query: >
        INSERT INTO eg_fm_applicantpersonal(id, aadhaarno, email, firstname, lastname, title, mobileno, tenantid, createdby, createdtime, lastmodifiedby, lastmodifiedtime) 
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      basePath: ApplicantPersonals.*
      jsonMaps:
      - jsonPath: $.ApplicantPersonals.*.id

      - jsonPath: $.ApplicantPersonals.*.aadhaarNo 
      
      - jsonPath: $.ApplicantPersonals.*.email 
      
      - jsonPath: $.ApplicantPersonals.*.firstName 
      
      - jsonPath: $.ApplicantPersonals.*.lastName 
      
      - jsonPath: $.ApplicantPersonals.*.title 
      
      - jsonPath: $.ApplicantPersonals.*.mobileNo 
      
      - jsonPath: $.ApplicantPersonals.*.tenantId
      
      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdTime
      
      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedTime
      
    - query: >
        INSERT INTO eg_fm_servicedetails(id, applicantpersonalid, serviceid, servicecode, businessservice, workflowcode, createdby, createddate, lastmodifiedby, lastmodifieddate,filecode) 
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?)
      basePath: ApplicantPersonals.*.serviceDetails
      jsonMaps:
      - jsonPath: $.ApplicantPersonals.*.serviceDetails.id

      - jsonPath: $.ApplicantPersonals.*.id
      
      - jsonPath: $.ApplicantPersonals.*.serviceDetails.serviceId 
      
      - jsonPath: $.ApplicantPersonals.*.serviceDetails.serviceCode 
      
      - jsonPath: $.ApplicantPersonals.*.serviceDetails.businessService 
      
      - jsonPath: $.ApplicantPersonals.*.serviceDetails.workflowCode 
      
      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdTime
      
      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedTime 
      
      - jsonPath: $.ApplicantPersonals.*.serviceDetails.fileCode 
      
    - query: >
        INSERT INTO eg_fm_applicantaddress(id, houseno, housename, street, pincode, postofficename, createdby, createddate, lastmodifiedby, lastmodifieddate,applicantpersonalid)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
      basePath: ApplicantPersonals.*.applicantAddresses
      jsonMaps:    
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.id

      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseNo
     
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseName
     
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.street
     
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.pincode
     
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.postOfficeName
     
      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdTime
     
      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedTime  
 
      - jsonPath: $.ApplicantPersonals.*.id
      
    - query: >
        INSERT INTO eg_fm_applicantservicedocuments(id, applicantid, servicedetailsid, documenttypeid, filestoreid, active, createdby, createddate, lastmodifiedby, lastmodifieddate,documentnumber)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )        
      basePath: ApplicantPersonals.*.applicantServiceDocuments
      jsonMaps:    
      - jsonPath: $.ApplicantPersonals.*.applicantServiceDocuments.id         
      
      - jsonPath: $.ApplicantPersonals.*.id
      
      - jsonPath: $.ApplicantPersonals.*.serviceDetails.id

      - jsonPath: $.ApplicantPersonals.*.applicantServiceDocuments.documentTypeId
     
      - jsonPath: $.ApplicantPersonals.*.applicantServiceDocuments.fileStoreId
     
      - jsonPath: $.ApplicantPersonals.*.applicantServiceDocuments.active              
       
      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.createdTime
     
      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedBy

      - jsonPath: $.ApplicantPersonals.*.auditDetails.lastModifiedTime 
      
      - jsonPath: $.ApplicantPersonals.*.applicantServiceDocuments.documentNumber       

  - version: 1.0
    description: Update applicant details in egov_filemgmnt database, eg_fm_applicantpersonal table
    fromTopic: update-fm-applicantpersonal
    isTransaction: true
    queryMaps:
    - query: >
        UPDATE eg_fm_applicantpersonal 
        SET aadhaarno = ?, email = ?, firstname = ?, lastname = ?, title = ?, mobileno = ?
        WHERE id = ?;
      basePath: ApplicantPersonals.*
      jsonMaps:
      - jsonPath: $.ApplicantPersonals.*.aadhaarNo 
      
      - jsonPath: $.ApplicantPersonals.*.email 
      
      - jsonPath: $.ApplicantPersonals.*.firstName 
      
      - jsonPath: $.ApplicantPersonals.*.lastName 
      
      - jsonPath: $.ApplicantPersonals.*.title 
      
      - jsonPath: $.ApplicantPersonals.*.mobileNo       
         
      - jsonPath: $.ApplicantPersonals.*.id 
      
    - query: >      
        UPDATE eg_fm_applicantaddress 
        SET houseno = ?, housename = ?, street = ?, pincode = ?, postofficename = ?
        WHERE id = ?;
      basePath: ApplicantPersonals.applicantAddresses
      jsonMaps:
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseNo 
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseName  
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.street 
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.pincode
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.postOfficeName          
         
      - jsonPath: $.ApplicantPersonals.*.id 
      
    - query: >      
        UPDATE eg_fm_applicantaddress 
        SET houseno = ?, housename = ?, street = ?, pincode = ?, postofficename = ?
        WHERE id = ?;
      basePath: ApplicantPersonals.applicantAddresses
      jsonMaps:
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseNo 
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseName  
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.street 
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.pincode
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.postOfficeName          
         
      - jsonPath: $.ApplicantPersonals.*.id 
      
    - query: >      
        UPDATE eg_fm_applicantdocuments 
        SET documenttypeid = ?, documentnumber = ?, docexpirydate = ?
        
        WHERE id = ?;
      basePath: ApplicantPersonals.applicantAddresses
      jsonMaps:
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseNo 
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.houseName  
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.street 
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.pincode
      
      - jsonPath: $.ApplicantPersonals.*.applicantAddresses.postOfficeName          
         
      - jsonPath: $.ApplicantPersonals.*.id 
            
            
#  - version: 1.0
#    description: Persists applicant service details in egov_filemgmnt database, eg_fm_servicedetails table
#    fromTopic: save-fm-servicedetails
#    isTransaction: true
#    queryMaps:
#    - query: >
#        INSERT INTO eg_fm_servicedetails(id, applicantpersonalid, serviceid, servicecode, businessservice, workflowcode, createdby, createdtime, lastmodifiedby, lastmodifiedtime) 
#        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
#      basePath: ServiceDetails.*
#      jsonMaps:
#      - jsonPath: $.ServiceDetails.*.id
#
#      - jsonPath: $.ServiceDetails.*.applicantPersonalId 
#      
#      - jsonPath: $.ServiceDetails.*.serviceId 
#      
#      - jsonPath: $.ServiceDetails.*.serviceCode 
#      
#      - jsonPath: $.ServiceDetails.*.businessService 
#      
#      - jsonPath: $.ServiceDetails.*.workflowCode 
#      
#      - jsonPath: $.ServiceDetails.*.auditDetails.createdBy
#
#      - jsonPath: $.ServiceDetails.*.auditDetails.createdTime
#      
#      - jsonPath: $.ServiceDetails.*.auditDetails.lastModifiedBy
#
#      - jsonPath: $.ServiceDetails.*.auditDetails.lastModifiedTime 

       